<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="/css/dashboard.css">
</head>

<body>

    <div id="profile-container"></div>

    <script id="profile-template" type="text/x-handlebars-template">
      <div class="profile">
        <img src="{{avatar}}" alt="{{name}}" class="profile-pic">
        <h2>{{name}}</h2>
        <p>{{bio}}</p>
    </div>

    <div class="hamburger-menu">
        <div id="menu-button" class="menu-icon">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <div id="menu-content" class="menu-content" style = "width:fit-content;">
            <ul>
                <li><a href="/project/new" id="addProject">Add Project</a></li>
                <li><a href="#" id="deleteAccount">Delete Account</a></li>
                <li><a href="#" id="changePassword">Change Password</a></li>
                <li><a href="#" id="changeInfo">Change Personal Info</a></li>
            </ul>
        </div>
    </div>
    <div class = "line"></div>
        <div class="portfolio">
            <h2>Your Projects</h2>
            <div>
                {{#each projects}}
                    {{> project-small}}
                {{else}}
                    <div>There doesn't seem to be anything here.</div>
                {{/each}}
            </div>
                
        </div>

        
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const source = document.getElementById('profile-template').innerHTML;
            const template = Handlebars.compile(source);
        
            const context = {
                name: 'John Doe',
                avatar: 'https://i.pravatar.cc/150',
                bio: 'Web Developer with over 5 years of experience.',
                files: ['/path/to/file1.pdf', '/path/to/project.zip'],
                posts: [
                    { content: 'This is a test post.', file: '/path/to/attachment.jpg' },
                    { content: 'Another post without attachment.' }
                ]
            };

            document.getElementById('profile-container').innerHTML = template(context);
        });

        document.addEventListener('DOMContentLoaded', function () {
            const menuButton = document.querySelector('#menu-button');
            const menuContent = document.querySelector('#menu-content');
            console.log(menuButton);
            menuButton.addEventListener('click', function(event){
                event.preventDefault();
                const isMenuOpen = menuContent.style.display === 'block';
                menuContent.style.display = isMenuOpen ? 'none' : 'block';
            });
        });
        function sharePost() {
            const content = document.getElementById('postContent').value;
            const fileInput = document.getElementById('postFile');
            const file = fileInput.files.length > 0 ? fileInput.files[0].name : null;

            const post = { content, file };
            const source = '<li><p>{{content}}</p>{{#if file}}<a href="{{file}}" target="_blank">View Attachment</a>{{/if}}</li>';
            const template = Handlebars.compile(source);

            document.getElementById('postsList').innerHTML += template(post);
            document.getElementById('postContent').value = '';  // Clear the textarea
            fileInput.value = '';  // Clear the file input
        }
    </script>


</body>

</html>